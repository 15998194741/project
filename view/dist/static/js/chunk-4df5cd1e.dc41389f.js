(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4df5cd1e"],{"1d60":function(n,t,e){"use strict";e.r(t);var r=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"layout"},[e("header",[e("span",{staticClass:"score"},[n._v("总分："+n._s(n.score))]),n._v(" "),e("button",{staticClass:"star",on:{click:n.init}},[n._v("开始新的游戏")]),n._v(" "),e("span",{staticClass:"sd"})]),n._v(" "),e("div",{staticClass:"all-container"},[e("div",{staticClass:"background"},n._l(16,(function(n){return e("span")})),0),n._v(" "),e("div",{staticClass:"container"},n._l(n.rocks,(function(t,r){return t?e("span",{key:r,staticClass:"list",style:"\n          zIndex: "+(t?t.num:0)+";\n          transform: translate("+n.cssTransition(t)+");\n        "},[e("span",{staticClass:"inner",style:"backgroundColor: "+(t?t.color:""),attrs:{id:"r"+(t&&t.id)}},[n._v("\n          "+n._s(t?t.num:"")+"\n        ")])]):n._e()})),0)])])},i=[],c=(e("96cf"),e("1da1")),o=(e("5df3"),e("ac6a"),e("55dd"),e("20d6"),e("7514"),e("4917"),e("3a34")),u=e.n(o);new u.a;var s=function(n){return function(t,e){var r=t[n],i=e[n];return r<i?-1:1}},a=function(n){return new Promise((function(t){return setTimeout(t,n)}))},d={data:function(){return{msg:"",score:0,rocks:[],color:{2:"#eee4da",4:"#ede0c8",8:"#f2b179",16:"#f59563",32:"#f67c5f",64:"#f65e3b",128:"#edcf72",256:"#edcc61",512:"#0444BF",1024:"#A79674",2048:"#282726",4096:"#280b21",8192:"#281d04"},directX:30}},mounted:function(){var n=this;window.app=this,this.init(),document.addEventListener("keydown",(function(t){switch(t.key.toLocaleUpperCase()){case"ARROWRIGHT":case"D":n.turn("right");break;case"ARROWLEFT":case"A":n.turn("left");break;case"ARROWDOWN":case"S":n.turn("down");break;case"ARROWUP":case"W":n.turn("up");break}})),document.addEventListener("touchstart",(function(t){var e=function e(r){r&&r.preventDefault();var i=r.touches[0].clientX-t.touches[0].clientX,c=r.touches[0].clientY-t.touches[0].clientY;i>n.directX?(n.turn("right"),document.removeEventListener("touchmove",e)):i<-n.directX?(n.turn("left"),document.removeEventListener("touchmove",e)):c>n.directX?(n.turn("down"),document.removeEventListener("touchmove",e)):c<-n.directX&&(n.turn("up"),document.removeEventListener("touchmove",e))};document.addEventListener("touchmove",e),document.addEventListener("touchend",(function(){document.removeEventListener("touchmove",e)}))}))},methods:{isMobile:function(){return window.navigator.userAgent.match(/Mobile/)},cssTransition:function(n){return this.isMobile()?"".concat(23.5*(n?n.x:0),"vw, ").concat(23.5*(n?n.y:0),"vw"):"".concat(120*(n?n.x:0),"px, ").concat(120*(n?n.y:0),"px")},init:function(){this.score=0,this.initRocks()},initRocks:function(){this.rocks=[],this.add(),this.add()},random24:function(){return Math.random()>.9?4:2},random0123:function(){return~~(4*Math.random())},createRock:function(){var n=this.random24(),t={x:this.random0123(),y:this.random0123(),num:n,id:this.rocks.length+1,color:this.color[n]},e=this.getRockByPoint({x:t.x,y:t.y});return e?this.createRock():t},isGameOver:function(){var n=this,t=this.isFull()&&this.rocks.filter((function(n){return n&&(3!==n.x||3!==n.y)})).find((function(t){var e=n.getRockByPoint({x:t.x+1,y:t.y}),r=n.getRockByPoint({x:t.x,y:t.y+1});return t.num===(e&&e.num)||t.num===(r&&r.num)}));return void 0===t},isSuccess:function(){var n=this.rocks.find((function(n){return n&&8192===n.num}));return void 0!==n},isFull:function(){return this.rocks.filter((function(n){return n})).length>15},add:function(){if(this.isFull())return!1;var n=this.createRock();this.rocks.push(n)},getRockByPoint:function(n){var t=n.x,e=n.y;return this.rocks.filter((function(n){return n})).find((function(n){return n.x===t&&n.y===e}))},getIndex:function(n){return this.rocks.findIndex((function(t){return t&&t.id===n}))},handleDirect:function(n){return"right"===n?{handleArr:function(n){return n.filter((function(n){return n&&3!==n.x})).sort(s("x")).reverse()},handleCondition:function(n){return n.x<3},next:function(n){return{x:n.x+1,y:n.y}},handleMove:function(n){return n.x++}}:"left"===n?{handleArr:function(n){return n.filter((function(n){return n&&0!==n.x})).sort(s("x"))},handleCondition:function(n){return n.x>0},next:function(n){return{x:n.x-1,y:n.y}},handleMove:function(n){n.x--}}:"up"===n?{handleArr:function(n){return n.filter((function(n){return n&&0!==n.y})).sort(s("y"))},handleCondition:function(n){return n.y>0},next:function(n){return{x:n.x,y:n.y-1}},handleMove:function(n){n.y--}}:"down"===n?{handleArr:function(n){return n.filter((function(n){return n&&3!==n.y})).sort(s("y")).reverse()},handleCondition:function(n){return n.y<3},next:function(n){return{x:n.x,y:n.y+1}},handleMove:function(n){n.y++}}:void 0},turn:function(n){var t=this;this.rocks.forEach((function(n){return n&&(n.canCalc=!0)})),Promise.all(this.handleDirect(n).handleArr(this.rocks).filter((function(n){return n})).map(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(r){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.calcAxis({e:r,direct:n}),e.abrupt("return",i);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())).then((function(n){if(n.indexOf(!0)>-1){if(t.isSuccess())return void t.$message.success("你真牛逼，你赢了，我服了");t.add()}else{if(t.isGameOver())return void t.$message.error("游戏结束请重新开始");if(t.isSuccess())return void t.$message.success("你真牛逼，你赢了，我服了")}setTimeout((function(){}),10)}))},mergeNumericBlockAddStyle:function(n){var t=document.querySelector("#r".concat(n.id));t.animate([{transform:"scale(0.95)"},{transform:"scale(1.3)"},{transform:"scale(1.03)"},{transform:"scale(1)"}],{duration:200})},calcAxis:function(n){var t=this,e=n.e,r=n.direct;return new Promise(function(){var n=Object(c["a"])(regeneratorRuntime.mark((function n(i,c){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=t.getRockByPoint(t.handleDirect(r).next(e)),!o||o.num===e.num){n.next=5;break}i(!1),n.next=19;break;case 5:if(!o||!o.canCalc||o.num!==e.num){n.next=18;break}return t.handleDirect(r).handleMove(e),o.num*=2,t.score+=e.num,o.canCalc=!1,o.color=t.color[o.num],t.mergeNumericBlockAddStyle(o),n.next=14,a(200);case 14:t.rocks.splice(t.getIndex(e.id),1,null),i(!0),n.next=19;break;case 18:void 0===o&&(t.handleDirect(r).handleCondition(e)&&(t.handleDirect(r).handleMove(e),t.calcAxis({e:e,direct:r})),i(!0));case 19:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}())}}},f=d,l=(e("1e03"),e("2877")),h=Object(l["a"])(f,r,i,!1,null,null,null);t["default"]=h.exports},"1e03":function(n,t,e){"use strict";var r=e("8ba8"),i=e.n(r);i.a},"8ba8":function(n,t,e){}}]);